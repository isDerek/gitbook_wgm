@startuml
header 鼠标协议交互流程
title 鼠标软件初始化流程
== 鼠标工具初始化 ==
鼠标配置上位机 -[#red]> 鼠标设备 : 根据指定 PID/UID 打开设备，若失败则显示未找到指定设备，成功进入工具配置界面
== 鼠标工具正常工作 == 
鼠标配置上位机 -[#red]> 鼠标设备 : 获取鼠标基本信息（当前 DPI、当前灯效、当前侧键一按键宏、当前侧键二按键宏、当前电量）
note left: 软件一打开连入设备就会发送以下信息
鼠标设备 -[#blue]> 鼠标配置上位机 : 返回当前 DPI、当前灯效、当前侧键一按键宏、当前侧键二按键宏、当前电量信息
== 鼠标工具配置流程 ==
鼠标配置上位机 -[#red]> 鼠标设备 : 设置指定 DPI
鼠标设备 -[#blue]> 鼠标配置上位机 : 鼠标设备配好指定 DPI 后返回指定 DPI
鼠标配置上位机 -[#red]> 鼠标设备 : 设置指定灯效
鼠标设备 -[#blue]> 鼠标配置上位机 : 鼠标设备配好指定灯效后返回指定灯效
鼠标配置上位机 -[#red]> 鼠标设备 : 设置指定侧键一按键宏
鼠标设备 -[#blue]> 鼠标配置上位机 : 鼠标设备配好指定侧键一后返回指定侧键一按键宏
鼠标配置上位机 -[#red]> 鼠标设备 : 设置指定侧键二按键宏
鼠标设备 -[#blue]> 鼠标配置上位机 : 鼠标设备配好指定侧键二按键宏后返回指定侧键二按键宏
== 鼠标工具 USB 升级流程 ==
鼠标配置上位机 -[#red]> 鼠标设备 : 设置 Device 进入 BootLoader 模式
鼠标设备 -[#blue]> 鼠标配置上位机 : 响应进入了 BootLoader 模式
鼠标配置上位机 -[#red]> 鼠标设备 : 通知 BootLoader 设备更新 FW 版本基本信息
鼠标设备 -[#blue]> 鼠标配置上位机 : 响应已接受到 FW 版本信息
鼠标配置上位机 -[#red]> 鼠标设备 : 向鼠标设备发送 FW 版本文件
鼠标设备 -[#blue]> 鼠标配置上位机 : 响应接收成功信息
鼠标配置上位机 -[#red]> 鼠标设备 : 版本文件发送完，通知设备退出 BootLoader 模式
鼠标设备 -[#blue]> 鼠标配置上位机 : 响应已退出 BootLoader 模式
@enduml